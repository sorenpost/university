<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-02-17 Mon 15:14 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>&lrm;</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="post" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2019 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orged2d256">1. To-do list <code>[0/9]</code></a>
<ul>
<li><a href="#orgbe10295">1.1. Coding</a></li>
<li><a href="#org7540d48">1.2. Figures</a></li>
<li><a href="#orgb9b5796">1.3. Questions</a></li>
</ul>
</li>
<li><a href="#orge604357">2. Product presence: RCA and RCApc</a>
<ul>
<li><a href="#orgca1b4a2">2.1. Revealed Comparative Advantage (RCA)</a></li>
<li><a href="#org1c5689c">2.2. Revealed Comparative advantage: coding</a></li>
<li><a href="#orgc8e2448">2.3. Revealed Comparative Advantage per capita (RCApc)</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="outline-container-orged2d256" class="outline-2">
<h2 id="orged2d256"><span class="section-number-2">1</span> To-do list <code>[0/9]</code></h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgbe10295" class="outline-3">
<h3 id="orgbe10295"><span class="section-number-3">1.1</span> Coding</h3>
<div class="outline-text-3" id="text-1-1">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Set up version control</li>
<li class="off"><code>[&#xa0;]</code> Clean trade data</li>
<li class="off"><code>[&#xa0;]</code> RCA and <i>per capita</i> RCA</li>
<li class="off"><code>[&#xa0;]</code> M-matrix for every year</li>
<li class="off"><code>[&#xa0;]</code> Product-product similarity for every year</li>
<li class="off"><code>[&#xa0;]</code> Country-product density for every year</li>
<li class="off"><code>[&#xa0;]</code> Country coherence for every year</li>
<li class="off"><code>[&#xa0;]</code> Product Space graph</li>
<li class="off"><code>[&#xa0;]</code> New product identification</li>
<li class="off"><code>[&#xa0;]</code> Fitness-algorithm</li>
</ul>
</div>
</div>
<div id="outline-container-org7540d48" class="outline-3">
<h3 id="org7540d48"><span class="section-number-3">1.2</span> Figures</h3>
<div class="outline-text-3" id="text-1-2">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> Density of new products vs density of not exported products</li>
<li class="off"><code>[&#xa0;]</code> Distribution of RCA (matrix)</li>
<li class="off"><code>[&#xa0;]</code> Distribution of complexity</li>
<li class="off"><code>[&#xa0;]</code> Distribution of sum of proximity (each product). Is an approximation to the degree distribution.</li>
</ul>
</div>
</div>
<div id="outline-container-orgb9b5796" class="outline-3">
<h3 id="orgb9b5796"><span class="section-number-3">1.3</span> Questions</h3>
<div class="outline-text-3" id="text-1-3">
<ul class="org-ul">
<li class="off"><code>[&#xa0;]</code> How are new/disappearing countries handled?</li>
</ul>
</div>
</div>
</div>

<div id="outline-container-orge604357" class="outline-2">
<h2 id="orge604357"><span class="section-number-2">2</span> Product presence: RCA and RCApc</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orgca1b4a2" class="outline-3">
<h3 id="orgca1b4a2"><span class="section-number-3">2.1</span> Revealed Comparative Advantage (RCA)</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Economies differ by sizes of many magnitudes. For instance, the economy of the US is around 19 trillions USD in 2019. This is approximately 400 times the size of the economy of Ghana. To meaningfully compare which products different economies specialize in, some normalization procedure is necessary. For this I use the Revealed Comparative Advantage (also known as the Balassa Index). Originally introduced by <a class='org-ref-reference' href="#balassa_trade_1965">balassa_trade_1965</a>.
</p>

<p>
RCA compares the share of a products export value in a regions total export to the share of the products global export value in the total global exports. More formally:
</p>

<p>
\[ RCA_{pc} = \frac{ X_{cp} }{ \sum_{p} X_{cp} } \bigg/ \frac{ \sum_{c} X_{cp} }{ \sum_{c} \sum_{p} X_{cp}} \]
</p>

<p>
where \(X_{cp}\) is the export value of product \(p\) in country \(c\) in a given year. If RCA is at 1 or above, a comparative advantage is considered revealed.
</p>
</div>
</div>

<div id="outline-container-org1c5689c" class="outline-3">
<h3 id="org1c5689c"><span class="section-number-3">2.2</span> Revealed Comparative advantage: coding</h3>
<div class="outline-text-3" id="text-2-2">
<p>
For data I use the cleaned trade data in SITC rev. 2 format (four digit). I only use data for the year 2010.
</p>

<div class="org-src-container">
<pre class="src src-R"><span style="color: #b751b6;">library</span><span style="color: #4078f2;">(</span>tidyverse<span style="color: #4078f2;">)</span>
<span style="color: #b751b6;">library</span><span style="color: #4078f2;">(</span>vroom<span style="color: #4078f2;">)</span>
<span style="color: #9ca0a4;">## </span><span style="color: #9ca0a4;">read data</span>
path <span style="color: #b751b6;">&lt;-</span> <span style="color: #50a14f;">"~/sorensfolder/sbpdata/data/sitc-rev2_tidy.csv"</span>
trade <span style="color: #b751b6;">&lt;-</span> vroom<span style="color: #4078f2;">(</span>path<span style="color: #4078f2;">)</span> <span style="color: #b751b6;">%&gt;%</span>
  filter<span style="color: #4078f2;">(</span>time == <span style="color: #da8548; font-weight: bold;">2010</span><span style="color: #4078f2;">)</span> <span style="color: #b751b6;">%&gt;%</span>
  select<span style="color: #4078f2;">(</span>-rca<span style="color: #4078f2;">)</span>
</pre>
</div>

<p>
As written above, the definition of RCA is as follows: 
</p>

<p>
\[ RCA_{pc} = \frac{ X_{cp} }{ \sum_{p} X_{cp} } \bigg/ \frac{ \sum_{c} X_{cp} }{ \sum_{c} \sum_{p} X_{cp}} \]
</p>

<p>
First, I build a country-product matrix, where the elements are the export-value in constant dollars. This matrix is the \(X\) matrix. Each element \(x_{cp}\) is the intensity, i.e. the export value, of the country-product pair.
</p>

<div class="org-src-container">
<pre class="src src-R">mat <span style="color: #b751b6;">&lt;-</span> spread<span style="color: #4078f2;">(</span>trade, key = unit, value = intensity<span style="color: #4078f2;">)</span> <span style="color: #b751b6;">%&gt;%</span>
  select<span style="color: #4078f2;">(</span>-time<span style="color: #4078f2;">)</span> <span style="color: #b751b6;">%&gt;%</span>
  column_to_rownames<span style="color: #4078f2;">(</span>var = <span style="color: #50a14f;">"region"</span><span style="color: #4078f2;">)</span> <span style="color: #b751b6;">%&gt;%</span>
  as.matrix<span style="color: #4078f2;">()</span>
</pre>
</div>

<p>
I calculate RCA values in three steps. First I find the share of a products export value in a country's total exports (the numerator) for each product.
</p>

<div class="org-src-container">
<pre class="src src-R">share_unit_region <span style="color: #b751b6;">&lt;-</span> mat / rowSums<span style="color: #4078f2;">(</span>mat<span style="color: #4078f2;">)</span>
</pre>
</div>

<p>
The <code>rowSums</code> sums the product export values for each country. This results in a vector with each country's total export value. This is then divided into the intensity matrix, element-wise. It is repeated column by column, meaning that each product is divided by respective country's total export. 
</p>

<p>
Second I find the share of each products export value in the total value of global exports (denominator).
</p>

<div class="org-src-container">
<pre class="src src-R">share_unit_global <span style="color: #b751b6;">&lt;-</span> colSums<span style="color: #4078f2;">(</span>mat<span style="color: #4078f2;">)</span> / sum<span style="color: #4078f2;">(</span>mat<span style="color: #4078f2;">)</span>
</pre>
</div>

<p>
This is essentially the same procedure as before, but with the column sums (a vector containing the total value of a products exports over all countries) divided by a vector (global exports).
</p>

<p>
Finally, I perform the division. This is essentially that same idea as step one. I transpose the nominator-matrix in order for R to divide the vector global product shares element-wise one column at a time. Finally I transpose the result to get the country-product format for the RCA matrix.
</p>

<div class="org-src-container">
<pre class="src src-R">incidence_mat <span style="color: #b751b6;">&lt;-</span> t<span style="color: #4078f2;">(</span>
    t<span style="color: #a626a4;">(</span>share_unit_region<span style="color: #a626a4;">)</span> / share_unit_global
<span style="color: #4078f2;">)</span>
</pre>
</div>

<p>
For most of the calculations, the RCA matrix needs to be binary. 
</p>

<div class="org-src-container">
<pre class="src src-R">binary_incidence_mat <span style="color: #b751b6;">&lt;-</span> ifelse<span style="color: #4078f2;">(</span>incidence_mat &gt;= <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">1</span>, <span style="color: #da8548; font-weight: bold;">0</span><span style="color: #4078f2;">)</span>
</pre>
</div>

<p>
The first 10 rows and 5 columns of the country-product RCA matrix, later defined as M is as follows:
</p>

<div class="org-src-container">
<pre class="src src-R">incidence_mat<span style="color: #4078f2;">[</span><span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #da8548; font-weight: bold;">5</span><span style="color: #4078f2;">]</span>
</pre>
</div>

<pre class="example">

            0011        0012        0013        0014     0015
ago 3.050055e-05  0.00000000 0.000000000 0.000000000 0.000000
alb 0.000000e+00  0.00000000 0.000000000 0.000000000 0.000000
are 6.714986e-03  0.17528790 0.000000000 0.003619958 3.108135
arg 4.465448e-02  0.03266859 0.000000000 0.105396860 2.930154
aus 7.589987e+00 18.73346642 0.004396553 0.172249172 3.680095
</pre>


<p>
And the corresponding binary matrix:
</p>

<div class="org-src-container">
<pre class="src src-R">binary_incidence_mat<span style="color: #4078f2;">[</span><span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #da8548; font-weight: bold;">5</span>, <span style="color: #da8548; font-weight: bold;">1</span>:<span style="color: #da8548; font-weight: bold;">5</span><span style="color: #4078f2;">]</span>
</pre>
</div>

<pre class="example">
    0011 0012 0013 0014 0015
ago    0    0    0    0    0
alb    0    0    0    0    0
are    0    0    0    0    1
arg    0    0    0    0    1
aus    1    1    0    0    1
</pre>
</div>
</div>
<div id="outline-container-orgc8e2448" class="outline-3">
<h3 id="orgc8e2448"><span class="section-number-3">2.3</span> Revealed Comparative Advantage per capita (RCApc)</h3>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: post</p>
<p class="date">Created: 2020-02-17 Mon 15:14</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
